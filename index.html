<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Text to HTML Converter</title>

<style>
  :root {
    --bg: #eef2f7;
    --card: #ffffff;
    --border: #d6dbe4;
    --text: #1f2937;
    --muted: #6b7280;
    --accent: #5b7cfa;
    --editor-bg: #fbfcff;
    --output-bg: #1e293b;
    --output-text: #e5e7eb;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    padding: 40px 20px;
    font-family: "Segoe UI", system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  .container {
    max-width: 960px;
    margin: 0 auto;
  }

  .title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .title span { color: var(--accent); }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 20px;
  }

  .toolbar {
    display: flex;
    gap: 8px;
    margin-bottom: 14px;
  }

  .toolbar button {
    border: 1px solid var(--border);
    background: #fff;
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 13px;
  }

  .editor {
    min-height: 240px;
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    background: var(--editor-bg);
    outline: none;
    font-size: 14px;
    line-height: 1.7;
  }

  .editor:empty:before {
    content: "Paste or type your text hereâ€¦";
    color: var(--muted);
  }

  .actions {
    display: flex;
    justify-content: space-between;
    margin-top: 16px;
    align-items: center;
  }

  .buttons {
    display: flex;
    gap: 10px;
  }

  .buttons button {
    background: var(--accent);
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 10px;
    cursor: pointer;
  }

  .buttons button.secondary { background: #020617; }
  .buttons button.copied { background: #22c55e; }

  pre {
    margin-top: 28px;
    background: var(--output-bg);
    color: var(--output-text);
    padding: 20px;
    border-radius: 14px;
    font-size: 12px;
    white-space: pre-wrap;
  }
</style>
</head>
<body>

<div class="container">

  <div class="title"><span>Text</span> â†’ <span>HTML</span> Converter</div>

  <div class="card">
    <div class="toolbar">
      <button onclick="cmd('bold')"><b>B</b></button>
      <button onclick="cmd('italic')"><i>I</i></button>
      <button onclick="cmd('underline')"><u>U</u></button>
      <button onclick="cmd('insertUnorderedList')">â€¢ List</button>
      <button onclick="cmd('insertOrderedList')">1. List</button>
      <button onclick="addLink()">Link</button>
      <button onclick="addImage()">Image</button>
    </div>

    <div id="editor" class="editor" contenteditable="true"></div>

    <div class="actions">
      <label>
        <input type="checkbox" id="addSeparator"> Add separator
      </label>

      <div class="buttons">
        <button onclick="convert()">Convert</button>
        <button id="copyBtn" class="secondary" onclick="copyHTML()">Copy HTML</button>
      </div>
    </div>
  </div>

  <pre id="output"></pre>

</div>

<script>
const editor = document.getElementById("editor");

function cmd(c){ document.execCommand(c,false,null); }

function addLink(){
  const u = prompt("Enter URL:");
  if(u) document.execCommand("createLink",false,u);
}

function addImage(){
  const u = prompt("Enter Image URL:");
  if(u) document.execCommand("insertImage",false,u);
}

/* Keyboard shortcuts */
editor.addEventListener("keydown", e => {
  if(e.ctrlKey && e.shiftKey && e.key === "7"){
    e.preventDefault();
    cmd("insertOrderedList");
  }
  if(!e.ctrlKey) return;
  switch(e.key.toLowerCase()){
    case "b": e.preventDefault(); cmd("bold"); break;
    case "i": e.preventDefault(); cmd("italic"); break;
    case "u": e.preventDefault(); cmd("underline"); break;
    case "k": e.preventDefault(); addLink(); break;
  }
});

/* ðŸ”¥ FIXED SPACE + MVD SAFE PASTE */
editor.addEventListener("paste", e => {
  e.preventDefault();

  const cb = e.clipboardData || window.clipboardData;
  let content = cb.getData("text/html") || cb.getData("text/plain");

  content = content
    .replace(/<!--[\s\S]*?-->/g,"")
    .replace(/\u00A0/g," ")
    /* preserve ONLY intentional spacing */
    .replace(/ {2,}/g, m => " " + "&nbsp;".repeat(m.length - 1))
    .replace(/<span[^>]*text-decoration\s*:\s*underline[^>]*>(.*?)<\/span>/gi,"<u>$1</u>")
    .replace(/<b>/gi,"<strong>").replace(/<\/b>/gi,"</strong>")
    .replace(/<em>/gi,"<i>").replace(/<\/em>/gi,"</i>")
    .replace(/<span[^>]*font-weight\s*:\s*(bold|700)[^>]*>(.*?)<\/span>/gi,"<strong>$2</strong>");

  document.execCommand("insertHTML", false, content);
});

function convert(){
  let h = editor.innerHTML;

  h = h.replace(/<(\/?)(\w+)([^>]*)>/gi,(m,s,t,a)=>{
    if(t==="a"){const x=a.match(/href="[^"]*"/i); return `<${s}${t} ${x?x[0]:""}>`;}
    if(t==="img"){const x=a.match(/src="[^"]*"/i); return `<img ${x?x[0]:""}>`;}
    return `<${s}${t}>`;
  }).replace(/<a /gi,'<a style="color:#0067B8;text-decoration:underline;" ');

  const contentBlock = `
<!-- Begin custome text Section -->
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#ffffff"
style="
font-family:'Segoe UI',Verdana,sans-serif;
font-size:16px;
line-height:24px;
letter-spacing:normal;
word-spacing:normal;
word-break:break-all;
white-space:pre-wrap;
padding:40px 30px;
text-align:left;
">
<span style="font-family:'Segoe UI',Arial,sans-serif;font-size:16px;">
${h}
</span>
</td>
</tr></tbody></table>
<!-- End custom text Section -->
`;

  const separatorBlock = `
<!-- Begin Seperator -->
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td style="padding:0 30px;">
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td style="border-top:1px solid #A2A2A2;font-size:1px;line-height:1px;">&nbsp;</td>
</tr></tbody></table>
</td>
</tr></tbody></table>
<!-- End Seperator -->
`;

  let finalHTML = contentBlock;
  if(document.getElementById("addSeparator").checked){
    finalHTML += separatorBlock;
  }

  document.getElementById("output").textContent = finalHTML.trim();
}

function copyHTML(){
  const b=document.getElementById("copyBtn");
  navigator.clipboard.writeText(document.getElementById("output").textContent)
    .then(()=>{
      b.textContent="Copied âœ“";
      b.classList.add("copied");
      setTimeout(()=>{
        b.textContent="Copy HTML";
        b.classList.remove("copied");
      },1500);
    });
}
</script>

</body>
</html>
